
/*!
 * jQuery UI Selectable @VERSION
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./mouse","./widget"],a)}else{a(jQuery)}}(function(a){return a.widget("ui.selectable",a.ui.mouse,{version:"@VERSION",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,b=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.addClass("ui-selectee");c.each(function(){var d=a(this),e=d.offset();a.data(this,"selectable-item",{element:this,$element:d,left:e.left,top:e.top,right:e.left+d.outerWidth(),bottom:e.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(d){var c=this,b=this.options;this.opos=[d.pageX,d.pageY];if(this.options.disabled){return}this.selectees=a(b.filter,this.element[0]);this._trigger("start",d);a(b.appendTo).append(this.helper);this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0});if(b.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=true;if(!d.metaKey&&!d.ctrlKey){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;c._trigger("unselecting",d,{unselecting:e.element})}});a(d.target).parents().addBack().each(function(){var e,f=a.data(this,"selectable-item");if(f){e=(!d.metaKey&&!d.ctrlKey)||!f.$element.hasClass("ui-selected");f.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");f.unselecting=!e;f.selecting=e;f.selected=e;if(e){c._trigger("selecting",d,{selecting:f.element})}else{c._trigger("unselecting",d,{unselecting:f.element})}return false}})},_mouseDrag:function(i){this.dragged=true;if(this.options.disabled){return}var f,h=this,d=this.options,c=this.opos[0],g=this.opos[1],b=i.pageX,e=i.pageY;if(c>b){f=b;b=c;c=f}if(g>e){f=e;e=g;g=f}this.helper.css({left:c,top:g,width:b-c,height:e-g});this.selectees.each(function(){var j=a.data(this,"selectable-item"),k=false;if(!j||j.element===h.element[0]){return}if(d.tolerance==="touch"){k=(!(j.left>b||j.right<c||j.top>e||j.bottom<g))}else{if(d.tolerance==="fit"){k=(j.left>c&&j.right<b&&j.top>g&&j.bottom<e)}}if(k){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;h._trigger("selecting",i,{selecting:j.element})}}else{if(j.selecting){if((i.metaKey||i.ctrlKey)&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}h._trigger("unselecting",i,{unselecting:j.element})}}if(j.selected){if(!i.metaKey&&!i.ctrlKey&&!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;h._trigger("unselecting",i,{unselecting:j.element})}}}});return false},_mouseStop:function(c){var b=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;b._trigger("unselected",c,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;b._trigger("selected",c,{selected:d.element})});this._trigger("stop",c);this.helper.remove();return false}})}));