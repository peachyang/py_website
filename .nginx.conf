index index.php;
autoindex off;
charset off;
etag off;

add_header 'X-Content-Type-Options' 'nosniff';
add_header 'X-XSS-Protection' '1; mode=block';

location / {
    try_files $uri $uri/ /index.php?$args;
}

location ~ ^\..+ {
    deny all;
}

location /app/ {
    deny all;
}

location /pub/ {
    location ~* \.(ico|jpe?g|png|gif|svg|js|css|swf|eot|ttf|otf|woff|woff2)$ {
        add_header Cache-Control "public";
        add_header X-Frame-Options "SAMEORIGIN";
        expires +1y;
    }
    location ~* \.(zip|gz|gzip|bz2|csv|xml|json)$ {
        add_header Cache-Control "no-store";
        add_header X-Frame-Options "SAMEORIGIN";
        expires    off;
    }
    add_header X-Frame-Options "SAMEORIGIN";
}

location ~* \.(ico|jpe?g|png|gif|svg|js|css|swf|eot|ttf|otf|woff|woff2)$ {
    add_header Cache-Control "public";
    expires +1y;
}

location ~* \.(zip|gz|gzip|bz2|csv|xml|html?|json)$ {
    add_header Cache-Control "no-store";
    expires    off;
}
