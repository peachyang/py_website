<?php
$collection = $this->getVariable('collection');
$product = $this->getProduct();
$images = $product->offsetGet('images');
$warehouse = new Seahinet\Catalog\Model\Warehouse;
$warehouse->load(1);
$inventory = $warehouse->getInventory($product->getId(), $product['sku']);
$options = $product->getOptions();

?>
<div class="container">
    <form action="<?php echo $this->getBaseUrl('checkout/cart/add/') ?>" method="post" enctype="multipart/form-data">
        <input type="hidden" name="csrf" value="<?php echo $this->getCsrfKey() ?>" />
        <input type="hidden" name="product_id" value="<?php echo $product->getId() ?>" />
        <input type="hidden" name="warehouse_id" value="<?php echo 1 ?>" />
        <div class="product-detail clearfix">
            <div class="col-lg-4">
                <?php echo $this->getChild('media')->setVariable('product', $product) ?>
                <div class="clearfix wishlist">
                    <ul>
                        <li><span class="fa fa-star"></span><a href="<?php echo $this->getBaseUrl('customer/wishlist/') ?>"><?php echo $this->translate('Wish baby'); ?></a></li>
                        <li>|</li>
                        <li><span class="fa fa-share-alt" aria-hidden="true"></span><a href="#"><?php echo $this->translate('Share'); ?></a></li>
                    </ul>
                    <ul>
                        <li><a href="#"></a></li>
                        <li><a href="#"></a></li>
                        <li><a href="#"></a></li>
                        <li><a href="#"></a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-6 product-info">
                <h3><?php echo $product['name'] ?></h3>
                <div class="clearfix main-box">
                    <div class="price-box">
                        <p>
                            <span class="price-text"><?php echo $this->translate('Price'); ?></span>
                            <?php echo $this->getPriceBox() ?>
                        <p>
                    </div>
                    <div class="product-review">
                        <span><?php echo count($this->product['review_id']); ?></span>
                        <span><?php echo $this->translate('Product review'); ?></span>
                    </div>
                    <div class="sale-decimals">
                        <span><?php echo count($this->product['order_id']); ?></span>
                        <span><?php echo $this->translate('Sale decimals'); ?></span>
                    </div>
                </div>
                <div class=" clearfix product-distribution">
                    <p>
                        <span><?php echo $this->translate('Distribution'); ?></span>
                        <span><?php echo $this->translate('Shandongqingdao'); ?></span>
                        <select name="address">
                            <option name="1">address</option>
                        </select>
                        <select name="express">
                            <option name="1">Express</option>
                        </select>
                    </p>
                </div>
                <div class="clearfix custom-options">
                    <dl>
                        <?php foreach ($options as $option): ?>
                            <dt><?php echo $option['title'] ?></dt>
                            
                            <dd>
                                <?php foreach ($option['value'] as $value): ?>
                                <span><?php echo $value['title'] ?></span>
                                <?php endforeach ?>
                            </dd>
                        <?php endforeach ?>
                    </dl>
                </div>
                <div class="clearfix product-decimal">
                    <p>
                        <span class="tb-decimal"><?php echo $this->translate('Product decimal'); ?></span>
                        <span class="tb-stock">
                            <label for="qty" class="spin minus">-</label>
                            <input id="qty" class="tb-text" value="1" 
                                   min="<?php echo (float) $inventory['min_qty'] ?>" 
                                   max="<?php echo min((float) $inventory['max_qty'],(float) $inventory['qty']) ?>" 
                                   step="<?php echo (float) $inventory['increment'] ?>" name="qty" type="number" />
                            <label for="qty" class="spin plus">+</label>
                        </span>
                    </p>
                </div>
                <div class="clearfix product-action">
                    <div class="product-sale">
                        <button type="submit" class="btn btn-sm"><?php echo $this->translate('Buy Now'); ?></button>
                        <span class="fa fa-shopping-cart" aria-hidden="true"></span>
                        <button type="submit" class="btn btn-add">
                            <?php echo $this->translate('Add to Cart'); ?>
                        </button>
                    </div>
                </div> 
            </div>
            <div class="col-lg-2">
                <div class="upsells">
                    <?php echo $this->getChild('upsells')->setVariable('product', $product)->setLimit(3) ?>
                </div>
            </div>
            <div class="clearfix product-recommend">
                <h2><span><?php echo $this->translate('Red hot'); ?></span></h2>
                <?php echo $this->getChild('related')->setVariable('product', $product)->setLimit(7) ?>
            </div>
        </div>        
    </form>
</div>
